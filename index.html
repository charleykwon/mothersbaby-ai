<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>🤱 육아 컴패니언 AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --olive: #5E6B3A;
            --olive-light: #8A9A5B;
            --olive-bg: #F0F2E8;
            --pink: #E8B4B8;
            --pink-light: #F5D6D9;
            --black-olive: #3D4A2D;
            --warm-gray: #6B6B6B;
            --urgent-red: #E74C3C;
            --urgent-orange: #F39C12;
            --bg-color: #F5F5F5;
            --card-bg: white;
            --text-color: #3D4A2D;
            --border-color: #E0E0E0;
        }
        
        /* 야간 모드 */
        body.night-mode {
            --olive: #4A5530;
            --olive-light: #6B7A4B;
            --olive-bg: #2A2F20;
            --black-olive: #E8E8E0;
            --warm-gray: #A0A0A0;
            --bg-color: #1A1C16;
            --card-bg: #252820;
            --text-color: #E8E8E0;
            --border-color: #3A3F30;
        }
        body.night-mode { background: var(--bg-color); }
        body.night-mode .page-wrapper { background: var(--card-bg); }
        body.night-mode .header { background: linear-gradient(135deg, #3A4528 0%, #4A5530 100%); }
        body.night-mode .search-bar { background: #1F2218; border-color: var(--border-color); }
        body.night-mode .search-input-wrap { background: var(--card-bg); border-color: var(--border-color); }
        body.night-mode .search-input { background: var(--card-bg); color: var(--text-color); }
        body.night-mode .bubble { background: #2A2F20; color: var(--text-color); }
        body.night-mode .category-card { background: var(--card-bg); border-color: var(--border-color); color: var(--text-color); }
        body.night-mode .category-desc { color: var(--warm-gray); }
        body.night-mode .answer-card { background: var(--card-bg); border-color: var(--border-color); }
        body.night-mode .answer-title { color: var(--text-color); }
        body.night-mode .answer-content { color: #C0C0B8; }
        body.night-mode .related-btn { background: #1F2218; border-color: var(--border-color); color: var(--text-color); }
        body.night-mode .action-btn { background: var(--card-bg); border-color: var(--border-color); color: var(--text-color); }
        body.night-mode .action-btn.back { background: #1F2218; }
        body.night-mode .footer { background: #1F2218; border-color: var(--border-color); color: var(--warm-gray); }
        body.night-mode .keyword { background: #3A4528; color: #A8B890; }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { height: 100%; }
        body {
            font-family: 'Noto Sans KR', sans-serif;
            min-height: 100%;
            color: var(--black-olive);
            margin: 0;
            padding: 20px;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background 0.3s ease;
        }
        .page-wrapper {
            width: 100%;
            max-width: 480px;
            min-height: calc(100vh - 40px);
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: background 0.3s ease;
        }
        .container {
            width: 100%;
            min-height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
        }
        @media (max-width: 500px) {
            body { padding: 0; background: var(--card-bg); }
            .page-wrapper { max-width: 100%; min-height: 100vh; border-radius: 0; box-shadow: none; }
            .container { min-height: 100vh; }
        }
        
        /* 확장된 헤더 */
        .header {
            background: linear-gradient(180deg, var(--olive) 0%, var(--olive-light) 100%);
            color: white;
            padding: 50px 20px 60px;
            text-align: center;
            position: relative;
            border-bottom: 4px solid var(--pink);
            border-radius: 0 0 30px 30px;
        }
        .header-icon {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 42px;
            backdrop-filter: blur(10px);
        }
        .header h1 { font-size: 24px; font-weight: 600; margin-bottom: 10px; letter-spacing: -0.5px; }
        .header p { font-size: 14px; opacity: 0.9; font-weight: 300; }
        
        /* 야간 모드 토글 */
        .night-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 48px;
            height: 48px;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            cursor: pointer;
            font-size: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        .night-toggle:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }
        .night-toggle:active {
            transform: scale(0.95);
        }
        .night-toggle:hover {
            background: rgba(255,255,255,0.25);
            transform: scale(1.05);
        }
        
        .search-bar {
            padding: 16px 20px;
            background: #FAFAFA;
            border-bottom: 1px solid #eee;
            transition: background 0.3s ease;
        }
        .search-input-wrap {
            display: flex;
            background: white;
            border: 1px solid #E0E0E0;
            border-radius: 25px;
            overflow: hidden;
        }
        .search-input {
            flex: 1;
            padding: 12px 18px;
            border: none;
            outline: none;
            font-size: 14px;
        }
        .search-btn {
            padding: 12px 18px;
            background: var(--olive);
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .message { display: flex; flex-direction: column; gap: 12px; }
        .bubble {
            background: var(--olive-bg);
            padding: 16px 18px;
            border-radius: 20px 20px 20px 6px;
            font-size: 14px;
            line-height: 1.6;
            color: var(--black-olive);
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .category-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }
        .category-card {
            background: white;
            border: 1px solid #E8E8E8;
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .category-card:hover {
            border-color: var(--olive);
            transform: translateY(-2px);
        }
        .category-card.urgent {
            border-color: var(--urgent-red);
            background: #FFF8F8;
        }
        .category-icon { font-size: 28px; margin-bottom: 8px; }
        .category-title { font-size: 14px; font-weight: 600; }
        .category-card.urgent .category-title { color: var(--urgent-red); }
        .category-desc { font-size: 11px; color: var(--warm-gray); margin-top: 4px; }
        
        .answer-card {
            background: white;
            border: 1px solid #E0E0E0;
            border-radius: 16px;
            padding: 16px;
            margin-top: 12px;
        }
        .answer-card.urgent {
            border-left: 4px solid var(--urgent-red);
            background: #FFFAFA;
        }
        .answer-header { display: flex; gap: 8px; margin-bottom: 10px; }
        .answer-badge {
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }
        .badge-urgent { background: var(--urgent-red); color: white; }
        .badge-warning { background: var(--urgent-orange); color: white; }
        .badge-normal { background: var(--olive-bg); color: var(--olive); }
        .answer-title { font-weight: 600; font-size: 15px; margin-bottom: 10px; }
        .answer-content { font-size: 14px; color: #555; line-height: 1.75; }
        .answer-keywords { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 12px; }
        .keyword {
            padding: 4px 10px;
            background: var(--olive-bg);
            border-radius: 12px;
            font-size: 11px;
            color: var(--olive);
        }
        
        .related-questions { margin-top: 16px; }
        .related-title { font-size: 13px; color: var(--warm-gray); margin-bottom: 10px; }
        .related-btn {
            display: block;
            width: 100%;
            padding: 14px 16px;
            margin-bottom: 8px;
            background: #FAFAFA;
            border: 1px solid #E8E8E8;
            border-radius: 12px;
            text-align: left;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .related-btn:hover { background: var(--olive-bg); border-color: var(--olive); }
        .related-btn:active { transform: scale(0.98); }
        
        .expert-box {
            background: linear-gradient(135deg, var(--pink-light) 0%, #FFF0F2 100%);
            border-radius: 16px;
            padding: 16px;
            margin-top: 16px;
            text-align: center;
        }
        .expert-box h4 { font-size: 14px; margin-bottom: 10px; }
        .expert-box a {
            display: inline-block;
            padding: 10px 20px;
            background: var(--olive);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 13px;
        }
        .expert-name { font-size: 11px; color: var(--warm-gray); margin-top: 8px; }
        
        /* 액션 버튼 영역 */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 16px;
        }
        .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 16px;
            background: white;
            border: 1px solid #E0E0E0;
            border-radius: 12px;
            font-size: 14px;
            color: var(--black-olive);
            cursor: pointer;
            transition: all 0.2s;
        }
        .action-btn:hover {
            background: var(--olive-bg);
            border-color: var(--olive);
        }
        .action-btn:active {
            transform: scale(0.98);
        }
        .action-btn.expert {
            background: linear-gradient(135deg, var(--pink-light) 0%, #FFF0F2 100%);
            border-color: var(--pink);
            color: #8B4A5E;
        }
        .action-btn.expert:hover {
            background: linear-gradient(135deg, var(--pink) 0%, var(--pink-light) 100%);
        }
        .action-btn.back {
            background: #F5F5F5;
            color: var(--warm-gray);
        }
        
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: #F5F5F5;
            border: 1px solid #E0E0E0;
            border-radius: 20px;
            font-size: 13px;
            color: var(--warm-gray);
            cursor: pointer;
            margin-bottom: 12px;
        }
        .back-btn:hover { background: #EBEBEB; }
        
        .footer {
            padding: 12px;
            text-align: center;
            font-size: 11px;
            color: var(--warm-gray);
            background: #FAFAFA;
            border-top: 1px solid #eee;
        }
        .footer a { color: var(--olive); }
        
        .typing { display: flex; gap: 4px; padding: 12px 16px; }
        .typing span {
            width: 8px; height: 8px;
            background: var(--olive);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing span:nth-child(1) { animation-delay: -0.32s; }
        .typing span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
            40% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <header class="header">
                <button class="night-toggle" id="nightToggle" onclick="toggleNightMode()">🌙</button>
                <div class="header-icon">🤱</div>
                <h1>육아 컴패니언 AI</h1>
                <p>With every moment</p>
            </header>
            <div class="search-bar">
                <div class="search-input-wrap">
                    <input type="text" class="search-input" id="searchInput" placeholder="궁금한 것을 검색하세요...">
                    <button class="search-btn" onclick="handleSearch()">🔍</button>
                </div>
            </div>
            <div class="chat-area" id="chatArea"></div>
            <footer class="footer">
                ⚠️ 의료 상담을 대체하지 않습니다 • <a href="tel:010-7573-2475">전문가 상담</a><br>
                © 2026 마더스베이비
            </footer>
        </div>
    </div>
    <script>
        const knowledgeUnits = [
            // ========== 자세/물림 ==========
            {id:"P01",title:"딥래치(깊은 물림) 확인 방법",chapter:"CHAPTER 7",timeline:"출산직후",urgency:"즉시대응필요",
            content:"올바른 수유에서 가장 중요한 것은 딥래치(깊은 물림)입니다. 아기가 유두만 무는 것이 아니라 유륜까지 깊게 물어야 해요.\n\n<strong>✅ 올바른 물림 신호</strong>\n• 아기 입이 물고기처럼 크게 벌어짐 (120도 이상)\n• 아기 턱이 유방에 닿아 있음\n• 아래 입술이 바깥으로 말려 있음\n• 코는 유방에서 살짝 떨어져 숨쉬기 편함\n\n<strong>⚠️ 다시 물려야 할 신호</strong>\n• '딸깍' 소리가 남\n• 유두 통증이 수유 내내 지속\n• 수유 후에도 아기가 배고파함\n\n💡 물림이 잘못되면 손가락으로 살짝 풀고 다시 시도하세요.",
            keywords:["딥래치","깊은물림","유륜","올바른자세"],category:"position"},
            
            {id:"P02",title:"교차 요람 자세 (Cross-Cradle Hold)",chapter:"CHAPTER 7",timeline:"첫1주",urgency:"일반정보",
            content:"초보맘에게 가장 추천하는 수유 자세입니다. 아기 머리를 컨트롤하기 쉬워서 올바른 물림을 잡기 좋아요.\n\n<strong>📋 자세 잡는 방법</strong>\n• 수유할 가슴 반대쪽 손으로 아기 머리 받치기\n• 엄지와 검지로 아기 귀 뒤를 부드럽게 지지\n• 같은 쪽 손으로 유방을 C자로 잡아 지지\n• 아기 배와 엄마 배가 밀착되도록\n\n<strong>✅ 장점</strong>\n• 아기 머리 컨트롤이 쉬움\n• 래치 확인이 용이함\n• 신생아, 작은 아기에게 특히 적합",
            keywords:["교차요람","수유자세","초보맘","신생아"],category:"position"},
            
            {id:"P03",title:"올바른 수유 자세 3단계 확인법",chapter:"CHAPTER 7",timeline:"첫1주",urgency:"일반정보",
            content:"수유 자세가 올바른지 3단계로 확인하는 방법입니다.\n\n<strong>1단계: 엄마 자세</strong>\n• 등과 허리가 편안하게 지지되어 있나요?\n• 팔이 쿠션이나 베개로 받쳐져 있나요?\n• 어깨에 긴장이 없나요?\n\n<strong>2단계: 아기 위치</strong>\n• 아기의 귀-어깨-엉덩이가 일직선인가요?\n• 아기 배와 엄마 배가 맞닿아 있나요?\n• 아기가 고개를 돌리지 않아도 되는 위치인가요?\n\n<strong>3단계: 물림 확인</strong>\n• 아기 입이 크게 벌어져 있나요?\n• 유륜까지 충분히 물렸나요?\n• 아래 입술이 바깥으로 말려 있나요?\n\n3단계 모두 통과하면 올바른 자세입니다!",
            keywords:["수유자세","체크리스트","3단계"],category:"position"},
            
            {id:"P04",title:"럭비공 자세 (Football Hold)",chapter:"CHAPTER 7",timeline:"첫1주",urgency:"일반정보",
            content:"제왕절개 후 배 압박이 부담되거나, 큰 유방을 가진 엄마에게 좋은 자세입니다.\n\n<strong>📋 자세 잡는 방법</strong>\n• 아기를 옆구리에 끼듯이 안기\n• 아기 다리는 엄마 등 뒤로 향하게\n• 손바닥으로 아기 머리와 목 받치기\n• 베개로 높이 조절하기\n\n<strong>✅ 이런 분께 추천</strong>\n• 제왕절개 후 (배 압박 없음)\n• 큰 유방을 가진 엄마\n• 쌍둥이 동시 수유 시\n• 사출이 강할 때",
            keywords:["럭비공","제왕절개","수유자세"],category:"position"},

            // ========== 젖량 고민 ==========
            {id:"S01",title:"모유량이 충분한지 확인하는 방법",chapter:"CHAPTER 10",timeline:"첫1주",urgency:"24시간내확인",
            content:"모유량 확인의 가장 확실한 지표는 기저귀와 체중입니다. 젖이 말랑하다고 부족한 게 아니에요.\n\n<strong>📊 기저귀로 확인 (하루 기준)</strong>\n• 생후 1일: 소변 1회, 대변 1회\n• 생후 2일: 소변 2회, 대변 2회\n• 생후 4일 이후: 소변 6회 이상, 대변 3-4회\n\n<strong>⚖️ 체중으로 확인</strong>\n• 생후 3-4일: 출생 체중의 7% 이내 감소는 정상\n• 생후 10-14일: 출생 체중 회복\n• 이후: 하루 20-30g 증가\n\n<strong>🚨 병원 방문 필요</strong>\n• 체중 10% 이상 감소\n• 2주 내 출생 체중 미회복",
            keywords:["모유량","기저귀","체중증가","충분한지"],category:"supply"},
            
            {id:"S02",title:"젖량 늘리는 핵심 원칙",chapter:"CHAPTER 10",timeline:"첫1주",urgency:"일반정보",
            content:"모유는 '수요-공급' 원칙으로 생산됩니다. 자주 비울수록 더 많이 만들어져요.\n\n<strong>🔑 핵심 원칙</strong>\n• 자주 비울수록 더 많이 생산\n• 유방이 비어있을수록 생산 속도 증가\n• 밤 수유가 특히 중요 (프롤락틴 분비↑)\n\n<strong>📋 실천 방법</strong>\n• 하루 8-12회 수유하기\n• 양쪽 유방 모두 비우기\n• 한 번에 15-20분 충분히 수유\n• 밤수유 건너뛰지 않기\n\n💡 젖량이 자리잡는 데는 보통 4-6주가 걸립니다. 조급해하지 마세요!",
            keywords:["젖량늘리기","수요공급","밤수유"],category:"supply"},
            
            {id:"S03",title:"파워펌핑으로 젖량 늘리기",chapter:"CHAPTER 10",timeline:"2-4주",urgency:"일반정보",
            content:"파워펌핑은 아기의 성장급증기 수유 패턴을 모방해서 젖량을 늘리는 방법입니다.\n\n<strong>⏱️ 파워펌핑 방법 (1시간)</strong>\n• 20분 유축 → 10분 휴식\n• 10분 유축 → 10분 휴식\n• 10분 유축 → 완료\n\n<strong>📋 실천 팁</strong>\n• 하루 1-2회, 같은 시간에 하기\n• 저녁 시간대가 효과적\n• 3-7일 지속하면 효과 나타남\n• 나오는 양보다 자극이 목적\n\n⚠️ 너무 무리하면 피로해지니 컨디션 보면서 하세요.",
            keywords:["파워펌핑","젖량늘리기","유축"],category:"supply"},

            // ========== 유두 문제 ==========
            {id:"N01",title:"편평·함몰 유두 관리법",chapter:"CHAPTER 32",timeline:"임신중",urgency:"24시간내확인",
            content:"편평유두나 함몰유두가 있어도 대부분 모유수유가 가능합니다. 출산 후 호르몬 변화로 개선되는 경우가 많아요.\n\n<strong>✅ 핵심 포인트</strong>\n• 아기는 유두가 아닌 <strong>유륜을 깊게</strong> 물어야 합니다\n• 수유 전 유두를 자극하면 돌출에 도움이 됩니다\n• C자 잡기로 유륜을 납작하게 만들어 물리세요\n\n<strong>💡 도움되는 도구</strong>\n• 니플쉴드: 일시적 사용 도구로, IBCLC 지도 하에 사용\n• 유두 흡입기: 수유 전 유두 돌출에 도움\n\n임신 중 유두 마사지는 효과가 불확실하니, 출산 후 전략에 집중하세요.",
            keywords:["편평유두","함몰유두","니플쉴드","깊은물림"],category:"nipple"},
            
            {id:"N02",title:"유두 통증 원인과 대처법",chapter:"CHAPTER 8",timeline:"출산직후",urgency:"24시간내확인",
            content:"수유 초기 약간의 불편함은 있을 수 있지만, 심한 통증은 정상이 아닙니다.\n\n<strong>🔍 통증 원인</strong>\n• 얕은 물림 (가장 흔한 원인)\n• 잘못된 젖 떼기 방법\n• 아기 설소대 단축증\n• 유두 감염(아구창)\n\n<strong>✅ 즉시 할 수 있는 것</strong>\n• 물림 교정 (딥래치 확인)\n• 수유 후 모유 발라 자연 건조\n• 라놀린 크림이나 하이드로겔 패드 사용\n• 덜 아픈 쪽부터 수유 시작\n\n<strong>🚨 병원 방문 필요</strong>\n• 물집, 갈라짐, 출혈이 있을 때\n• 7일 이상 호전 없을 때",
            keywords:["유두통증","얕은물림","라놀린"],category:"nipple"},
            
            {id:"N03",title:"유두 상처·갈라짐 관리",chapter:"CHAPTER 8",timeline:"출산직후",urgency:"24시간내확인",
            content:"유두에 상처가 있어도 수유를 계속할 수 있습니다. 올바른 관리가 중요해요.\n\n<strong>✅ 상처 관리법</strong>\n• 수유 후 모유를 상처에 바르고 자연 건조\n• 라놀린 크림 또는 하이드로겔 패드 사용\n• 브라 안에 모유 패드가 젖으면 바로 교체\n• 덜 아픈 쪽부터 수유 시작\n\n<strong>💡 심한 갈라짐일 때</strong>\n• 1-2일 정도 해당 쪽은 유축으로 대체\n• 상처 회복 후 다시 직수 시도\n• 물림 자세 반드시 점검하기\n\n상처의 근본 원인은 대부분 얕은 물림입니다!",
            keywords:["유두상처","갈라짐","관리"],category:"nipple"},

            // ========== 밤수유 ==========
            {id:"T01",title:"밤수유 언제까지 해야 할까?",chapter:"CHAPTER 15",timeline:"3-6개월",urgency:"일반정보",
            content:"밤수유는 아기 성장과 엄마 젖량 유지 모두에 중요합니다. 월령에 따라 자연스럽게 줄어들어요.\n\n<strong>📊 월령별 밤수유 기대치</strong>\n• 0-3개월: 2-3회 정상\n• 3-6개월: 1-2회로 점차 감소\n• 6개월 이후: 점진적 줄이기 가능\n\n<strong>💡 알아두세요</strong>\n• 밤에 프롤락틴(젖 생산 호르몬)이 가장 많이 분비됨\n• 무리하게 끊으면 젖량 감소 우려\n• 아기마다 개인차가 큼\n\n통잠을 재우고 싶은 마음은 이해하지만, 아기 신호에 맞춰 천천히 줄여가세요.",
            keywords:["밤수유","줄이기","통잠"],category:"night"},
            
            {id:"T02",title:"밤수유 줄이기 전략",chapter:"CHAPTER 15",timeline:"3-6개월",urgency:"일반정보",
            content:"밤수유를 줄이려면 낮 시간 전략이 중요합니다.\n\n<strong>🌙 밤수유 줄이기 전략</strong>\n• 낮 수유를 충분히 하기 (4시간 이상 벌리지 않기)\n• 저녁 집중 수유 (탱크업): 자기 전 충분히 먹이기\n• 밤-낮 구분 명확히: 밤엔 조용히, 불 최소화\n• 파트너와 역할 분담: 기저귀, 재우기 등\n\n<strong>⚠️ 주의사항</strong>\n• 배고픔 vs 습관 수유 구분하기\n• 6개월 이전에는 무리하게 끊지 않기\n• 아기가 아프거나 성장급증기엔 유연하게",
            keywords:["밤수유줄이기","탱크업","낮수유"],category:"night"},
            
            {id:"T03",title:"수면 리그레션 대처법",chapter:"CHAPTER 15",timeline:"3-6개월",urgency:"일반정보",
            content:"잘 자던 아기가 갑자기 자주 깨는 '수면 리그레션'은 뇌 발달로 인한 일시적 현상입니다.\n\n<strong>📅 주로 나타나는 시기</strong>\n• 4개월, 8-10개월, 12개월, 18개월, 24개월\n\n<strong>✅ 대처 방법</strong>\n• 기존 수면 루틴 유지하기\n• 낮잠 시간과 환경 점검\n• 배고픔인지 확인 후 필요시 수유\n• 너무 지치기 전에 재우기\n\n<strong>💡 알아두세요</strong>\n• 보통 2-4주 후 자연스럽게 회복됩니다\n• 이 시기에 새로운 습관을 들이지 않는 게 좋아요\n• 엄마도 충분히 쉬세요!",
            keywords:["수면리그레션","통잠","밤수유"],category:"night"},

            // ========== 복직 준비 ==========
            {id:"W01",title:"복직 준비 타임라인",chapter:"CHAPTER 20",timeline:"3-6개월",urgency:"계획수립용",
            content:"복직 2-4주 전부터 체계적으로 준비하면 모유수유를 이어갈 수 있습니다.\n\n<strong>📅 D-4주</strong>\n• 유축기 선택 및 사용 연습\n• 모유 보관 용기 준비\n• 냉동 모유 비축 시작 (목표: 3-5일분)\n\n<strong>📅 D-2주</strong>\n• 젖병 수유 연습 (다른 사람이 주기)\n• 어린이집/육아 도우미 적응 시작\n• 유축 루틴 연습\n\n<strong>📅 D-1주</strong>\n• 실제 스케줄대로 리허설\n• 보냉백, 아이스팩 테스트\n• 회사 유축 공간 확인",
            keywords:["복직","타임라인","유축","준비"],category:"work"},
            
            {id:"W02",title:"모유 보관 334 규칙",chapter:"CHAPTER 20",timeline:"3-6개월",urgency:"24시간내확인",
            content:"모유 보관의 기본 원칙은 '334 규칙'입니다. 꼭 기억하세요!\n\n<strong>🌡️ 334 규칙</strong>\n• 실온 (25℃ 이하): <strong>3시간</strong>\n• 냉장 (4℃): <strong>3일</strong>\n• 냉동 (-18℃): <strong>6개월</strong> (권장 3개월)\n\n<strong>📋 보관 팁</strong>\n• 날짜 라벨 필수로 붙이기\n• 소량(60-120ml)씩 나눠서 보관\n• 냉장고 안쪽에 보관 (문 쪽은 온도 변화 큼)\n\n<strong>🔄 해동 방법</strong>\n• 냉장 해동 (8-12시간) 또는 흐르는 미지근한 물\n• 전자레인지 절대 금지!\n• 해동 후 24시간 내 사용",
            keywords:["모유보관","334규칙","냉동모유","해동"],category:"work"},
            
            {id:"W03",title:"직장에서 유축 루틴",chapter:"CHAPTER 20",timeline:"3-6개월",urgency:"일반정보",
            content:"복직 후에도 젖량을 유지하려면 규칙적인 유축이 중요합니다.\n\n<strong>⏰ 유축 스케줄</strong>\n• 3시간마다 유축 (하루 2-3회)\n• 점심시간 + 오전/오후 각 1회\n• 한 번에 15-20분씩\n\n<strong>📋 준비물</strong>\n• 전동 유축기 (양쪽 동시 가능하면 시간 절약)\n• 보냉백 + 아이스팩\n• 모유 저장팩 또는 병\n• 유축기 세척 도구\n\n<strong>💡 팁</strong>\n• 출퇴근 시 직수로 연결감 유지\n• 주말은 직수 중심으로\n• 스트레스 받으면 양이 줄 수 있으니 여유롭게",
            keywords:["유축","직장","복직","젖량유지"],category:"work"},

            // ========== 단유 ==========
            {id:"D01",title:"점진적 단유 방법",chapter:"CHAPTER 25",timeline:"12개월이상",urgency:"계획수립용",
            content:"2-4주에 걸쳐 천천히 줄여가는 것이 엄마 몸과 아기 마음 모두에 좋습니다.\n\n<strong>📅 단유 스케줄 예시 (4주)</strong>\n• 1주차: 가장 덜 중요한 수유 1회 제거\n• 2주차: 추가로 1회 제거\n• 3주차: 낮 수유 모두 제거\n• 4주차: 아침/저녁만 → 완전 단유\n\n<strong>💡 단유 시 젖 관리</strong>\n• 불편할 때만 살짝 짜기 (완전히 비우지 않기)\n• 냉찜질로 불편감 완화\n• 꽉 조이는 브라 대신 편한 스포츠브라\n\n<strong>❤️ 마음 챙기기</strong>\n• 호르몬 변화로 우울감이 올 수 있어요\n• 죄책감 느끼지 않아도 됩니다\n• 새로운 방식으로 아기와 교감하세요",
            keywords:["단유","점진적","젖말리기"],category:"weaning"},
            
            {id:"D02",title:"단유 시 젖 관리와 불편감 해소",chapter:"CHAPTER 25",timeline:"12개월이상",urgency:"일반정보",
            content:"단유 과정에서 가슴이 불편할 수 있습니다. 올바른 관리법을 알아두세요.\n\n<strong>✅ 젖 관리 원칙</strong>\n• 불편할 때만 압력을 줄일 정도로 살짝 짜기\n• 완전히 비우면 계속 생산되므로 주의\n• 점점 짜는 양과 횟수 줄이기\n\n<strong>💡 불편감 완화 방법</strong>\n• 냉찜질 (양배추 잎도 효과적)\n• 타이레놀 등 진통제 복용 가능\n• 꽉 조이지 않는 편한 브라 착용\n• 샤워 시 따뜻한 물이 닿으면 사출될 수 있으니 주의\n\n보통 1-2주면 불편감이 많이 줄어듭니다.",
            keywords:["단유","젖관리","불편감"],category:"weaning"},

            // ========== 특수 상황 ==========
            {id:"X01",title:"쌍둥이 모유수유",chapter:"CHAPTER 30",timeline:"출산직후",urgency:"일반정보",
            content:"쌍둥이도 완전 모유수유가 가능합니다. 젖은 수요만큼 생산되니까요!\n\n<strong>🍼 수유 방법</strong>\n• 동시 수유: 럭비공 자세로 양쪽에 한 명씩\n• 번갈아 수유: 한 명씩 따로 수유\n• 혼합: 상황에 따라 유연하게\n\n<strong>💡 실용적인 팁</strong>\n• 수유 쿠션(쌍둥이용) 활용하기\n• 누가 어느 쪽을 먹었는지 기록하기\n• 한 명이 잘 못 빨면 그 쪽을 더 자주 수유\n\n<strong>❤️ 엄마 건강</strong>\n• 수분과 영양 섭취 충분히\n• 도움 요청하기 (쌍둥이는 팀플레이!)\n• 완벽하지 않아도 괜찮아요",
            keywords:["쌍둥이","동시수유","완모"],category:"special"},
            
            {id:"X02",title:"조산아 모유수유",chapter:"CHAPTER 30",timeline:"출산직후",urgency:"24시간내확인",
            content:"조산아에게 모유는 더욱 중요합니다. 면역력과 발달에 큰 도움이 돼요.\n\n<strong>🏥 NICU에서</strong>\n• 출산 후 가능한 빨리 유축 시작 (6시간 이내)\n• 2-3시간마다 유축으로 젖량 확보\n• 소량이라도 초유는 매우 귀중해요\n\n<strong>👶 아기와의 접촉</strong>\n• 캥거루케어(피부접촉) 적극적으로\n• 직수 전환은 아기 상태 보며 천천히\n• NICU 담당 간호사와 상의하기\n\n<strong>💡 알아두세요</strong>\n• 조산아용 모유는 성분이 달라요 (아기에게 맞춤!)\n• 젖량이 적어도 포기하지 마세요\n• IBCLC 상담을 적극 활용하세요",
            keywords:["조산아","NICU","캥거루케어"],category:"special"},

            // ========== 긴급 상황 ==========
            {id:"U01",title:"유선염 응급 대처법",chapter:"CHAPTER 30",timeline:"2-4주",urgency:"즉시대응필요",
            content:"<strong>38℃ 이상 고열</strong>과 <strong>유방의 붉은 반점</strong>이 있다면 유선염을 의심하세요.\n\n<strong>🚨 유선염 증상</strong>\n• 38℃ 이상 고열, 오한, 몸살 기운\n• 유방에 붉고 뜨거운 부분\n• 심한 통증과 부기\n\n<strong>⚡ 즉시 해야 할 것</strong>\n• <strong>수유 중단하지 말기!</strong> 계속 비워야 합니다\n• 아픈 쪽부터 먼저 수유\n• 따뜻한 찜질 후 수유\n• 충분한 휴식과 수분 섭취\n\n<strong>🏥 병원 방문</strong>\n• 12-24시간 내 호전 없으면 병원 가세요\n• 항생제가 필요할 수 있어요 (수유 가능한 약 처방)\n\n⚠️ 갑자기 수유를 중단하면 오히려 악화됩니다!",
            keywords:["유선염","고열","응급"],category:"urgent"},
            
            {id:"U02",title:"아기 탈수 신호 체크",chapter:"CHAPTER 31",timeline:"첫1주",urgency:"즉시대응필요",
            content:"신생아 탈수는 빠른 발견이 중요합니다. 다음 신호를 확인하세요.\n\n<strong>🚨 탈수 경고 신호</strong>\n• 6시간 이상 소변이 없음\n• 소변 색이 진한 노란색/오렌지색\n• 입술과 입안이 마름\n• 울어도 눈물이 나지 않음\n• 대천문(숨구멍)이 움푹 들어감\n• 평소보다 많이 처지거나 심하게 보챔\n\n<strong>⚡ 즉시 해야 할 것</strong>\n• 수유 횟수 늘리기 (깨워서라도 먹이기)\n• 체중 확인하기\n\n<strong>🏥 응급실 방문</strong>\n• 8시간 이상 소변 없음\n• 열이 38℃ 이상\n• 먹지 않으려 함",
            keywords:["탈수","소변","응급","신생아"],category:"urgent"},
            
            {id:"U03",title:"젖몸살(유방울혈) 응급 대처",chapter:"CHAPTER 30",timeline:"출산직후",urgency:"즉시대응필요",
            content:"유방이 돌처럼 딱딱하고 아프다면 젖몸살(유방울혈)입니다.\n\n<strong>🚨 젖몸살 증상</strong>\n• 유방이 딱딱하고 팽팽함\n• 심한 통증과 열감\n• 유륜까지 부어서 아기가 물기 어려움\n\n<strong>⚡ 응급 대처법</strong>\n• 수유 전: 따뜻한 찜질 + 가볍게 마사지\n• 역압 마사지: 유륜 주변을 부드럽게 눌러 부기 빼기\n• 자주 수유 (2-3시간마다)\n• 수유 후: 냉찜질로 부기 완화\n\n<strong>💡 예방법</strong>\n• 초기에 자주 수유하기\n• 한쪽만 먹이지 말고 양쪽 번갈아\n• 꽉 끼는 브라 피하기",
            keywords:["젖몸살","유방울혈","응급"],category:"urgent"},
            
            {id:"U04",title:"긴급 단유 시 가슴 관리",chapter:"CHAPTER 28",timeline:"2-4주",urgency:"즉시대응필요",
            content:"건강 문제 등으로 갑자기 단유해야 할 때의 가슴 관리법입니다.\n\n<strong>📅 1일차 (가장 힘든 날)</strong>\n• 냉찜질 20분 × 하루 6회 (양배추 잎 또는 아이스팩)\n• 유축 금지 (공급 신호를 보내지 않기 위해)\n• 타이레놀 등 진통제 복용\n• 꽉 조이는 스포츠브라 24시간 착용\n\n<strong>📅 2일차 (고비)</strong>\n• 너무 팽팽하면 손으로 소량만 짜기 (30ml 정도)\n• 냉찜질 계속\n• 수분 섭취 줄이지 않기 (탈수 위험)\n\n<strong>📅 3일차 이후</strong>\n• 점차 호전 시작\n• 1-2주면 대부분 안정됨\n\n⚠️ 미열(37.5-38도)은 정상 반응이에요.",
            keywords:["긴급단유","가슴관리","응급"],category:"urgent"},

            // ========== 추가 데이터 (28개) ==========
            
            // 자세/물림 추가
            {id:"P05",title:"유관 막힘 대처법",chapter:"CHAPTER 14",timeline:"1-3개월",urgency:"24시간내확인",
            content:"유관 막힘 대처 방법입니다.\n\n<strong>📋 원칙</strong>\n아기 턱이 딱딱한 부위 쪽으로 향하게!\n\n<strong>✅ 대처 순서</strong>\n1. 따뜻한 샤워 후 부드럽게 마사지\n2. 해당 쪽 가슴부터 2-3시간 간격 수유\n3. 아기 턱이 딱딱한 부위 방향으로 수유 자세 조정\n4. 24-48시간 안에 나아지는지 확인\n\n⚠️ 48시간 후에도 호전 없으면 병원 방문",
            keywords:["유관막힘","대처법"],category:"position"},
            
            {id:"P06",title:"수유 중 '딸깍' 소리의 의미",chapter:"CHAPTER 7",timeline:"출산직후",urgency:"24시간내확인",
            content:"수유 중 '딸깍' 소리가 들린다면 물림이 얕다는 신호입니다.\n\n<strong>🔍 원인</strong>\n• 유두만 물고 있음\n• 혀의 위치가 잘못됨\n• 설소대 짧음(설소대단축증)\n\n<strong>✅ 해결 방법</strong>\n• 즉시 수유를 멈추고 다시 깊게 물리기\n• 아기의 턱을 유방에 더 가까이 붙이기\n• 아기의 머리를 약간 뒤로 젖히기\n\n⚠️ 지속되면 IBCLC 상담하여 설소대 확인",
            keywords:["딸깍소리","얕은물림"],category:"position"},
            
            {id:"P07",title:"유두 통증의 정상 범위",chapter:"CHAPTER 12",timeline:"2-4주",urgency:"24시간내확인",
            content:"수유 초기 약간의 유두 불편감은 정상일 수 있습니다.\n\n<strong>✅ 정상 범위</strong>\n• 수유 시작 후 처음 10-20초간 약간 아픔\n• 유륜이 민감할 수 있음\n• 2-3주 후 점차 사라짐\n\n<strong>🚨 비정상 신호</strong>\n• 수유 내내 지속되는 통증\n• 수유 후에도 쑤시거나 타는 듯한 통증\n• 유두에 균열이나 피가 남\n• 2주 이상 지속됨\n\n💡 '참고 견디는' 것은 해결책이 아닙니다!",
            keywords:["유두통증","정상범위"],category:"position"},
            
            // 젖량 추가
            {id:"S04",title:"아기의 젖 거부 대응",chapter:"CHAPTER 3",timeline:"출산직후",urgency:"24시간내확인",
            content:"아기가 젖을 거부할 때 대응법입니다.\n\n<strong>✅ 시도해볼 것</strong>\n• 피부접촉 시간 늘리기\n• 배고픔 신호 초기에 시도하기\n• 조용하고 어두운 환경에서 수유\n• 다른 자세로 시도해보기\n\n<strong>💡 알아두세요</strong>\n• 일시적인 젖 거부는 흔합니다\n• 성장급증기에 자주 발생\n• 도움이 필요하면 IBCLC 상담을 받으세요",
            keywords:["젖거부","대응"],category:"supply"},
            
            {id:"S05",title:"설소대 단축증(혀유착증) 대처법",chapter:"CHAPTER 34",timeline:"출산직후",urgency:"24시간내확인",
            content:"설소대 단축증은 조기 발견과 치료가 중요합니다.\n\n<strong>🔍 의심 증상</strong>\n• 수유 시 지속적인 통증\n• 아기가 깊게 물지 못함\n• 체중 증가 부진\n• 수유 중 딸깍 소리\n\n<strong>✅ 대처 방법</strong>\n• 소아과/이비인후과 진료\n• 필요시 설소대 절개 고려\n• IBCLC 상담으로 수유 자세 교정",
            keywords:["설소대","혀유착증"],category:"supply"},
            
            {id:"S06",title:"분유 보충이 정말 필요한 경우",chapter:"CHAPTER 5",timeline:"출산직후",urgency:"24시간내확인",
            content:"분유 보충이 의학적으로 필요한 경우를 알아두세요.\n\n<strong>🚨 보충 필요한 경우</strong>\n• 체중 감소 10% 이상\n• 저혈당 증상\n• 황달 수치가 높을 때\n• 탈수 증상\n\n<strong>💬 물어볼 질문</strong>\n• '왜 분유 보충이 필요한가요?'\n• '대신 더 자주 수유하면 안 될까요?'\n• '유축해서 주면 안 될까요?'\n\n위 경우가 아니라면 충분히 질문해도 됩니다.",
            keywords:["분유보충","의학적기준"],category:"supply"},
            
            {id:"S07",title:"모유량 부족 vs 정상 패턴 구분법",chapter:"CHAPTER 11",timeline:"1-3개월",urgency:"24시간내확인",
            content:"진짜 부족인지 정상인지 구분하는 방법입니다.\n\n<strong>✅ 정상 (걱정 불필요)</strong>\n• 아기가 자주 먹는다 (8-12회)\n• 유축 시 적게 나온다 (유축량≠생산량)\n• 저녁에 보챈다 (클러스터 피딩)\n\n<strong>🚨 진짜 부족 신호</strong>\n• 생후 5일 후 소변 6회 미만/일\n• 생후 2주 후에도 출생 체중 미회복\n• 일주일에 125g 미만 증가\n\n대부분은 정상입니다. 걱정되면 IBCLC 상담으로 확인하세요.",
            keywords:["모유량","부족","정상"],category:"supply"},
            
            // 유두문제 추가
            {id:"N04",title:"유두 통증 전문가 상담 필요 시점",chapter:"CHAPTER 13",timeline:"1-3개월",urgency:"24시간내확인",
            content:"다음 상황에서는 전문가 상담이 필요합니다.\n\n<strong>🏥 IBCLC/소아과 상담</strong>\n• 24-48시간 관리해도 안 나아짐\n• 유두에 하얀 점/수포/깊은 균열\n• 아기 입안에 하얀 반점 (아구창 의심)\n• 아기가 계속 얕게 물음\n• 통증이 점점 심해짐\n\n💡 혼자 고민하지 마세요. 전문가 도움이 해결의 지름길입니다.",
            keywords:["전문가상담","유두통증"],category:"nipple"},
            
            {id:"N05",title:"유방울혈 대처법",chapter:"CHAPTER 14",timeline:"1-3개월",urgency:"24시간내확인",
            content:"유방울혈 대처의 핵심 원칙입니다.\n\n<strong>📋 원칙</strong>\n수유 전 따뜻하게 / 수유 후 차갑게\n\n<strong>✅ 대처 순서</strong>\n1. 자주 수유해서 비우기 (하루 8회 이상)\n2. 수유 전 따뜻한 찜질\n3. 유륜 주위 역압 마사지\n4. 수유 후 냉찜질 10-20분\n\n💡 2-3일이면 대부분 호전됩니다.",
            keywords:["유방울혈","대처법"],category:"nipple"},
            
            {id:"N06",title:"유방울혈 vs 유선염 구분법",chapter:"CHAPTER 14",timeline:"1-3개월",urgency:"24시간내확인",
            content:"증상이 비슷하지만 대응이 다릅니다.\n\n<strong>🟡 유방울혈 (젖몸살)</strong>\n• 양쪽 가슴 모두 단단함\n• 미열 (37.5-38도)\n• 수유/유축 후 편해짐\n• 전신 상태 양호\n\n<strong>🔴 유선염</strong>\n• 한쪽 가슴에 붉고 뜨거운 부위\n• 고열 (38.5도 이상)\n• 독감 같은 전신 증상\n• 수유 후에도 통증 지속\n\n⚠️ 유선염 의심 시 24시간 내 병원 방문!",
            keywords:["유방울혈","유선염","구분"],category:"nipple"},
            
            // 밤수유 추가
            {id:"T04",title:"프롤락틴 호르몬의 역할",chapter:"CHAPTER 1",timeline:"임신중",urgency:"일반정보",
            content:"프롤락틴은 모유를 '만드는' 호르몬입니다.\n\n<strong>🔬 작동 원리</strong>\n• 아기가 젖을 빨면 프롤락틴 분비\n• 프롤락틴이 모유 생성 신호 전달\n• 자주 빨릴수록 더 많이 생산 (수요-공급)\n\n<strong>🌙 밤수유가 중요한 이유</strong>\n• 밤 10시~새벽에 프롤락틴 수치 최고\n• 이 시간 수유가 젖량 유지에 핵심\n\n💡 밤수유를 건너뛰면 젖량이 줄 수 있어요.",
            keywords:["프롤락틴","밤수유"],category:"night"},
            
            {id:"T05",title:"아기와 성인의 수면 구조 차이",chapter:"CHAPTER 10",timeline:"2-4주",urgency:"일반정보",
            content:"아기가 자주 깨는 건 정상입니다!\n\n<strong>📊 수면 비교</strong>\n• 수면 주기: 아기 40-60분 vs 성인 90-120분\n• 얕은 잠 비율: 아기 50% vs 성인 20%\n• 각성 빈도: 아기는 자주 깸\n\n<strong>💡 알아두세요</strong>\n밤에 자주 깨는 아기는 문제가 있는 것이 아니라 정상적인 발달 과정을 지나고 있는 것입니다.\n\n아기의 수면은 성인과 다릅니다!",
            keywords:["수면구조","자주깸"],category:"night"},
            
            {id:"T06",title:"월령별 정상 수면 패턴",chapter:"CHAPTER 10",timeline:"2-4주",urgency:"일반정보",
            content:"월령별 밤수유 횟수와 연속 수면 시간입니다.\n\n<strong>📊 정상 범위</strong>\n• 0-3개월: 밤수유 2-8회, 연속 수면 2-5시간\n• 3-6개월: 밤수유 1-5회, 연속 수면 3-8시간\n• 6-12개월: 밤수유 0-4회, 연속 수면 4-10시간\n\n<strong>💡 핵심</strong>\n이 범위 안에 있다면 정상입니다.\n우리 아기의 패턴이 정답입니다!",
            keywords:["수면패턴","월령별"],category:"night"},
            
            {id:"T07",title:"밤수유 팀 분담 전략",chapter:"CHAPTER 18",timeline:"3-6개월",urgency:"일반정보",
            content:"모유는 엄마의 몫, 밤의 나머지는 팀의 몫!\n\n<strong>📋 역할 분담 예시</strong>\n\n밤 10-12시:\n• 엄마: 수유\n• 파트너: 트림·재우기\n\n새벽 2-4시:\n• 엄마: 수유\n• 파트너: 트림·재우기\n\n새벽 5-7시 (선택):\n• 엄마: 수면\n• 파트너: 유축병 수유 전담\n\n💡 분담하면 엄마도 연속 수면이 가능해요!",
            keywords:["팀분담","밤수유"],category:"night"},
            
            // 복직 추가
            {id:"W04",title:"수유 중 안전한 약물 확인 3단계",chapter:"CHAPTER 33",timeline:"1-3개월",urgency:"24시간내확인",
            content:"약물 복용이 필요할 때 안전성 확인법입니다.\n\n<strong>1단계: LactMed 검색</strong>\n• 미국 NIH 데이터베이스\n• 영문 약품명으로 검색\n\n<strong>2단계: 의사/약사에게 확인</strong>\n• '수유 중 안전한가요?'\n• '대체 약이 있나요?'\n\n<strong>3단계: 타이밍 조절</strong>\n• 수유 직후 복용\n• 다음 수유까지 시간 최대화\n\n<strong>✅ 대부분 안전</strong>\n타이레놀, 이부프로펜, 항생제 대부분",
            keywords:["약물","수유중"],category:"work"},
            
            {id:"W05",title:"외출·여행 준비물 체크리스트",chapter:"CHAPTER 24",timeline:"6개월이상",urgency:"계획수립용",
            content:"상황별 준비물입니다.\n\n<strong>짧은 외출 (2-4시간)</strong>\n• 수유 케이프 (필요 시)\n• 여분의 옷\n• 물, 간식 (엄마용)\n\n<strong>긴 외출 (4시간 이상)</strong>\n• 위 항목 +\n• 보냉백, 아이스팩\n• 손/전동 유축기\n• 모유 저장 팩\n\n<strong>여행 (1박 이상)</strong>\n• 위 항목 +\n• 유축기 세척 도구\n• 대용량 보냉백",
            keywords:["외출","여행","준비물"],category:"work"},
            
            {id:"W06",title:"복직 후 모유수유 가능성",chapter:"CHAPTER 3",timeline:"임신중",urgency:"계획수립용",
            content:"복직 후에도 모유수유 가능합니다!\n\n<strong>✅ 핵심 포인트</strong>\n• 유축과 저장으로 충분히 가능\n• 직장 내 유축 루틴 만들기\n• 보관 방법 익히기 (334 규칙)\n\n<strong>💡 팁</strong>\n• 출퇴근 시 직수로 연결감 유지\n• 주말은 직수 중심으로\n• 점진적으로 적응하기\n\n많은 직장맘들이 성공적으로 병행하고 있어요!",
            keywords:["복직","가능성"],category:"work"},
            
            // 단유/이유 추가
            {id:"D03",title:"이유식 시작 시기와 준비 신호",chapter:"CHAPTER 20",timeline:"3-6개월",urgency:"일반정보",
            content:"이유식 시작 권장 시기는 만 6개월 전후입니다.\n\n<strong>✅ 시작 준비 신호 5가지</strong>\n1. 목을 잘 가눔\n2. 도움받아 앉을 수 있음\n3. 음식에 관심을 보임\n4. 혀 내밀기 반사 감소\n5. 손에 있는 것을 입으로 가져감\n\n💡 5가지 신호가 모두 나타나면 시작 가능합니다!",
            keywords:["이유식","시작시기"],category:"weaning"},
            
            {id:"D04",title:"이유식과 모유수유 병행 원칙",chapter:"CHAPTER 20",timeline:"3-6개월",urgency:"일반정보",
            content:"이유식은 모유를 대체하는 게 아니라 보완하는 것입니다.\n\n<strong>📋 핵심 원칙</strong>\n• 1세까지 주 영양원은 여전히 모유/분유\n• 이유식은 새로운 맛·질감 경험\n• 모유수유 횟수는 점진적으로 조정\n\n<strong>💡 알아두세요</strong>\n이유식을 시작해도 모유수유는 계속할 수 있습니다.\n둘은 함께 갑니다!",
            keywords:["이유식","병행"],category:"weaning"},
            
            {id:"D05",title:"혼합수유로의 전환",chapter:"CHAPTER 25",timeline:"6개월이상",urgency:"일반정보",
            content:"혼합수유도 충분히 좋은 선택입니다.\n\n<strong>📋 기본 원칙</strong>\n• 조금이라도 모유를 주는 것만으로도 의미 있음\n• 갑자기 끊기보다 천천히 분유 보충\n\n<strong>✅ 단계적 접근</strong>\n• 하루 1회 수유를 분유로 대체\n• 며칠 후 2회로 점차 증가\n\n<strong>💡 분유 타이밍</strong>\n• 낮 시간: 돌봄자가 분유\n• 퇴근 후와 밤: 모유",
            keywords:["혼합수유","전환"],category:"weaning"},
            
            {id:"D06",title:"아기 주도 단유",chapter:"CHAPTER 27",timeline:"12개월이상",urgency:"일반정보",
            content:"아기가 스스로 단유를 이끄는 경우입니다.\n\n<strong>🔍 특징</strong>\n• 아기가 젖을 덜 찾게 됨\n• 이유식이나 다른 음식에 더 관심\n• 수유 횟수가 자연스럽게 감소\n• 보통 돌 이후에 흔함\n\n<strong>💡 엄마의 역할</strong>\n• 아기의 속도를 존중하기\n• 다른 방식으로 애착과 안정감 제공\n• 억지로 끼지 않기\n\n아기 주도 단유도 자연스러운 과정입니다!",
            keywords:["아기주도","단유"],category:"weaning"},
            
            // 특수상황 추가
            {id:"X03",title:"구순구개열 아기의 모유수유",chapter:"CHAPTER 34",timeline:"출산직후",urgency:"24시간내확인",
            content:"구순구개열 아기도 모유수유가 가능합니다!\n\n<strong>✅ 도움되는 것들</strong>\n• 특수 젖병 (Haberman, Pigeon 등) 사용\n• 유축 모유 공급\n• IBCLC 전문가 상담\n• 팀 접근 (소아과, 성형외과, 치과 등)\n\n<strong>💡 알아두세요</strong>\n특별한 기술과 도구가 필요할 수 있지만,\n전문가 도움으로 충분히 가능합니다.",
            keywords:["구순구개열","특수상황"],category:"special"},
            
            {id:"X04",title:"NICU 아기에게 모유의 중요성",chapter:"CHAPTER 30",timeline:"출산직후",urgency:"일반정보",
            content:"NICU 아기에게 모유는 특히 중요합니다.\n\n<strong>✅ 모유의 효과</strong>\n• 감염 예방\n• 소화 흡수 용이\n• 뇌 발달 도움\n• NEC(괴사성 장염) 위험 감소\n\n<strong>💡 알아두세요</strong>\n조산아의 경우 모유의 면역학적 이점이 더욱 중요합니다.\n소량이라도 초유는 매우 귀중해요!",
            keywords:["NICU","조산아","모유"],category:"special"},
            
            // 긴급상황 추가
            {id:"U05",title:"분유 보충이 필요한 의학적 기준",chapter:"CHAPTER 5",timeline:"출산직후",urgency:"즉시대응필요",
            content:"분유 보충이 의학적으로 필요한 경우입니다.\n\n<strong>🚨 보충 필요</strong>\n• 체중 감소 10% 이상\n• 저혈당 증상\n• 황달 수치가 높을 때\n• 탈수 증상\n\n<strong>💬 권유받았을 때 물어볼 질문</strong>\n• 왜 분유 보충이 필요한가요?\n• 대신 더 자주 수유하면 안 될까요?\n• 유축해서 주면 안 될까요?",
            keywords:["분유보충","의학적기준"],category:"urgent"},
            
            {id:"U06",title:"출산 후 첫 수유 골든타임",chapter:"CHAPTER 5",timeline:"출산직후",urgency:"즉시대응필요",
            content:"출산 후 1시간 이내가 골든타임입니다!\n\n<strong>🌟 왜 중요한가요?</strong>\n• 아기가 가장 각성 상태인 시간\n• 피부접촉 후 젖 찾기 반사 활성화\n• 첫 수유 성공률이 높음\n\n<strong>💡 알아두세요</strong>\n이 시간이 지나도 괜찮아요.\n언제든 시작할 수 있습니다!\n\n제왕절개 후에도 회복실에서 시도 가능해요.",
            keywords:["골든타임","첫수유"],category:"urgent"},
            
            {id:"U07",title:"즉시 연락이 필요한 신호",chapter:"CHAPTER 9",timeline:"2-4주",urgency:"즉시대응필요",
            content:"다음 증상이 나타나면 즉시 의료진에게 연락하세요!\n\n<strong>🚨 긴급 신호</strong>\n• 24시간 젖은 기저귀 4개 미만\n• 수유 거부가 계속됨\n• 체중 감소 10% 이상\n• 황달이 심해짐\n• 열이 나거나 축 늘어짐\n\n⚠️ 망설이지 말고 연락하세요!",
            keywords:["긴급신호","연락"],category:"urgent"},
            
            {id:"U08",title:"유방울혈·유관막힘·유선염 구분",chapter:"CHAPTER 14",timeline:"1-3개월",urgency:"즉시대응필요",
            content:"세 가지 상태를 구분하는 방법입니다.\n\n<strong>🟡 유방울혈</strong>\n• 양쪽 전체 부음\n• 정상~미열\n• 가슴만 불편\n\n<strong>🟠 유관 막힘</strong>\n• 한쪽 특정 부위\n• 정상~미열\n• 가슴만 불편\n\n<strong>🔴 유선염</strong>\n• 한쪽 붉고 뜨거움\n• 38도 이상 고열\n• 오한·몸살·독감 같음\n\n⚠️ 유선염 의심 시 24시간 내 병원!",
            keywords:["울혈","유관막힘","유선염"],category:"urgent"},
            
            {id:"U09",title:"산후우울증 도움 필요 신호",chapter:"CHAPTER 36",timeline:"1-3개월",urgency:"즉시대응필요",
            content:"다음 증상이 2주 이상 지속되면 전문가 상담이 필요합니다.\n\n<strong>🚨 도움 필요 신호</strong>\n• 극심한 슬픔·공허함\n• 아기에 대한 감정 연결 어려움\n• 불안·공황\n• 수면 장애 (피곤해도 못 잠)\n• 자해/자살 생각\n• 아기를 해칠 것 같은 생각\n\n💜 도움을 요청하는 것은 강한 엄마의 표시입니다.\n혼자 견디지 마세요!",
            keywords:["산후우울증","도움"],category:"urgent"}
        ];
        
        const tagDictionary = [
            {name:"딥래치",synonyms:["깊은물림","deep latch"]},
            {name:"유선염",synonyms:["mastitis","유방염"]},
            {name:"함몰유두",synonyms:["inverted nipple"]},
            {name:"편평유두",synonyms:["flat nipple"]},
            {name:"탈수",synonyms:["dehydration"]},
            {name:"밤수유",synonyms:["야간수유"]},
            {name:"복직",synonyms:["return to work"]},
            {name:"유축",synonyms:["펌핑","pumping"]},
            {name:"단유",synonyms:["weaning","젖떼기"]},
            {name:"젖몸살",synonyms:["울혈","engorgement"]},
            {name:"니플쉴드",synonyms:["유두보호기","nipple shield"]},
            {name:"파워펌핑",synonyms:["power pumping"]},
            {name:"수면리그레션",synonyms:["sleep regression"]},
            {name:"334",synonyms:["모유보관"]},
            {name:"유관막힘",synonyms:["plugged duct","막힘"]},
            {name:"설소대",synonyms:["혀유착","tongue tie"]},
            {name:"프롤락틴",synonyms:["prolactin"]},
            {name:"이유식",synonyms:["보완식","고형식"]},
            {name:"혼합수유",synonyms:["mixed feeding"]},
            {name:"골든타임",synonyms:["첫수유"]},
            {name:"산후우울증",synonyms:["postpartum depression"]},
            {name:"NICU",synonyms:["신생아중환자실"]},
            {name:"구순구개열",synonyms:["cleft lip","cleft palate"]}
        ];
        
        const chatArea = document.getElementById('chatArea');
        const searchInput = document.getElementById('searchInput');
        
        const categories = [
            { id: 'position', icon: '🤱', title: '자세 / 물림', desc: '수유 자세와 젖물림' },
            { id: 'supply', icon: '💧', title: '젖량 고민', desc: '모유가 부족한 것 같아요' },
            { id: 'nipple', icon: '👙', title: '유두 문제', desc: '통증, 상처, 함몰' },
            { id: 'night', icon: '🌙', title: '밤수유', desc: '밤중 수유와 수면' },
            { id: 'work', icon: '💼', title: '복직 준비', desc: '직장맘 유축과 보관' },
            { id: 'weaning', icon: '🍼', title: '단유 / 이유', desc: '젖떼기와 이유식' },
            { id: 'special', icon: '💜', title: '특수 상황', desc: '쌍둥이, 조산아' },
            { id: 'urgent', icon: '🚨', title: '긴급 상황', desc: '즉시 대응 필요', urgent: true }
        ];
        
        function renderHome() {
            chatArea.innerHTML = `
                <div class="message">
                    <div class="bubble">안녕하세요! 👋<br><br>모유수유 여정에서 궁금한 점이 있으시면<br>카테고리를 선택하거나 검색해보세요.</div>
                    <div class="category-grid">
                        ${categories.map(cat => `
                            <div class="category-card ${cat.urgent ? 'urgent' : ''}" onclick="selectCategory('${cat.id}')">
                                <div class="category-icon">${cat.icon}</div>
                                <div class="category-title">${cat.title}</div>
                                <div class="category-desc">${cat.desc}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
        
        function expandQuery(query) {
            const expanded = [query.toLowerCase()];
            tagDictionary.forEach(tag => {
                if (query.includes(tag.name) || (tag.synonyms && tag.synonyms.some(s => query.includes(s)))) {
                    expanded.push(tag.name.toLowerCase());
                    if (tag.synonyms) tag.synonyms.forEach(s => expanded.push(s.toLowerCase()));
                }
            });
            return [...new Set(expanded)];
        }
        
        function search(query, categoryId = null) {
            const keywords = expandQuery(query);
            const results = [];
            knowledgeUnits.forEach(unit => {
                if (categoryId && unit.category !== categoryId) return;
                let score = 0;
                const title = (unit.title || '').toLowerCase();
                const content = (unit.content || '').toLowerCase();
                const unitKeywords = (unit.keywords || []).join(' ').toLowerCase();
                const urgency = unit.urgency || '';
                keywords.forEach(kw => {
                    if (title.includes(kw)) score += 20;
                    if (unitKeywords.includes(kw)) score += 15;
                    if (content.includes(kw)) score += 5;
                });
                if (categoryId) score += 10;
                if (urgency.includes('즉시대응')) score += 30;
                else if (urgency.includes('24시간')) score += 20;
                if (score > 0) results.push({ unit, score });
            });
            results.sort((a, b) => b.score - a.score);
            return results.slice(0, 5);
        }
        
        function selectCategory(categoryId) {
            const cat = categories.find(c => c.id === categoryId);
            if (!cat) return;
            chatArea.innerHTML = `
                <button class="back-btn" onclick="renderHome()">← 처음으로</button>
                <div class="message" style="align-self:flex-end">
                    <div class="bubble" style="background:var(--olive);color:white;border-radius:20px 20px 6px 20px;">${cat.icon} ${cat.title}</div>
                </div>
                <div class="message"><div class="typing"><span></span><span></span><span></span></div></div>
            `;
            setTimeout(() => showResults(search('', categoryId), cat), 500);
        }
        
        function handleSearch() {
            const query = searchInput.value.trim();
            if (!query) return;
            chatArea.innerHTML = `
                <button class="back-btn" onclick="renderHome()">← 처음으로</button>
                <div class="message" style="align-self:flex-end">
                    <div class="bubble" style="background:var(--olive);color:white;border-radius:20px 20px 6px 20px;">${escapeHtml(query)}</div>
                </div>
                <div class="message"><div class="typing"><span></span><span></span><span></span></div></div>
            `;
            searchInput.value = '';
            setTimeout(() => showResults(search(query), null, query), 500);
        }
        
        function showResults(results, category, query) {
            const lastMsg = chatArea.querySelector('.message:last-child');
            if (results.length === 0) {
                lastMsg.innerHTML = `<div class="bubble">관련 정보를 찾지 못했어요 😅<br><br>다른 키워드로 검색해보시거나 전문가 상담을 이용해보세요.</div>`;
                return;
            }
            
            const main = results[0].unit;
            const isUrgent = main.urgency?.includes('즉시대응');
            const badge = main.urgency?.includes('즉시대응') ? '<span class="answer-badge badge-urgent">🚨 즉시대응</span>' :
                          main.urgency?.includes('24시간') ? '<span class="answer-badge badge-warning">⏰ 24시간내</span>' :
                          '<span class="answer-badge badge-normal">' + (main.timeline || '일반') + '</span>';
            
            let html = `
                <div class="bubble">${category ? category.icon + ' <strong>' + category.title + '</strong>에 대해 안내해드릴게요.' : '🔍 검색 결과를 찾았어요!'}</div>
                <div class="answer-card ${isUrgent ? 'urgent' : ''}">
                    <div class="answer-header">${badge}<span class="answer-badge badge-normal">${main.chapter || ''}</span></div>
                    <div class="answer-title">${escapeHtml(main.title)}</div>
                    <div class="answer-content">${formatContent(main.content)}</div>
                    ${main.keywords?.length ? '<div class="answer-keywords">' + main.keywords.map(k=>'<span class="keyword">#'+k+'</span>').join('') + '</div>' : ''}
                </div>
            `;
            
            if (results.length > 1) {
                html += '<div class="related-questions"><div class="related-title">📌 관련 정보</div>';
                results.slice(1, 4).forEach(r => {
                    html += `<div class="related-btn" data-unit-id="${r.unit.id}">${escapeHtml(r.unit.title)}</div>`;
                });
                html += '</div>';
            }
            
            // 액션 버튼 영역
            html += getActionButtons(main.id, main.title, main.content);
            
            lastMsg.innerHTML = html;
            
            // 관련 버튼 이벤트 - chatArea 전체에서 검색
            chatArea.querySelectorAll('.related-btn').forEach(btn => {
                btn.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const unitId = this.getAttribute('data-unit-id');
                    if (unitId) showDetail(unitId);
                };
            });
            
            // 액션 버튼 이벤트
            setupActionButtons(chatArea, main);
        }
        
        function showDetail(unitId) {
            const unit = knowledgeUnits.find(u => u.id === unitId);
            if (!unit) return;
            const isUrgent = unit.urgency?.includes('즉시대응');
            const badge = unit.urgency?.includes('즉시대응') ? '<span class="answer-badge badge-urgent">🚨 즉시대응</span>' :
                          unit.urgency?.includes('24시간') ? '<span class="answer-badge badge-warning">⏰ 24시간내</span>' :
                          '<span class="answer-badge badge-normal">' + (unit.timeline || '일반') + '</span>';
            
            const newCard = document.createElement('div');
            newCard.className = 'message';
            newCard.style.animation = 'fadeIn 0.3s ease';
            newCard.innerHTML = `
                <div class="answer-card ${isUrgent ? 'urgent' : ''}">
                    <div class="answer-header">${badge}<span class="answer-badge badge-normal">${unit.chapter || ''}</span></div>
                    <div class="answer-title">${escapeHtml(unit.title)}</div>
                    <div class="answer-content">${formatContent(unit.content)}</div>
                    ${unit.keywords?.length ? '<div class="answer-keywords">' + unit.keywords.map(k=>'<span class="keyword">#'+k+'</span>').join('') + '</div>' : ''}
                </div>
                ${getActionButtons(unit.id, unit.title, unit.content)}
            `;
            chatArea.appendChild(newCard);
            
            // 액션 버튼 이벤트
            setupActionButtons(newCard, unit);
            
            chatArea.scrollTop = chatArea.scrollHeight;
        }
        
        function getActionButtons(id, title, content) {
            return `
                <div class="action-buttons">
                    <button class="action-btn" data-action="bookmark" data-id="${id}">⭐ 즐겨찾기</button>
                    <button class="action-btn" data-action="share">💬 공유</button>
                    <button class="action-btn" data-action="copy">🔗 복사</button>
                    <a href="tel:010-7573-2475" class="action-btn expert">👩‍⚕️ 전문가에게 도움 요청하기</a>
                    <button class="action-btn back" onclick="renderHome()">← 이전으로</button>
                </div>
            `;
        }
        
        function setupActionButtons(container, unit) {
            const bookmarkBtn = container.querySelector('[data-action="bookmark"]');
            const shareBtn = container.querySelector('[data-action="share"]');
            const copyBtn = container.querySelector('[data-action="copy"]');
            
            if (bookmarkBtn) {
                // 저장된 즐겨찾기 확인
                const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
                if (bookmarks.includes(unit.id)) {
                    bookmarkBtn.innerHTML = '⭐ 즐겨찾기 됨';
                    bookmarkBtn.style.background = 'var(--olive-bg)';
                }
                
                bookmarkBtn.addEventListener('click', function() {
                    const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
                    const idx = bookmarks.indexOf(unit.id);
                    if (idx === -1) {
                        bookmarks.push(unit.id);
                        this.innerHTML = '⭐ 즐겨찾기 됨';
                        this.style.background = 'var(--olive-bg)';
                        alert('즐겨찾기에 추가되었습니다!');
                    } else {
                        bookmarks.splice(idx, 1);
                        this.innerHTML = '⭐ 즐겨찾기';
                        this.style.background = 'white';
                        alert('즐겨찾기가 해제되었습니다.');
                    }
                    localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                });
            }
            
            if (shareBtn) {
                shareBtn.addEventListener('click', function() {
                    const text = unit.title + '\n\n' + unit.content.replace(/<[^>]*>/g, '');
                    if (navigator.share) {
                        navigator.share({ title: unit.title, text: text });
                    } else {
                        alert('공유 기능은 모바일에서 사용 가능합니다.');
                    }
                });
            }
            
            if (copyBtn) {
                copyBtn.addEventListener('click', function() {
                    const text = unit.title + '\n\n' + unit.content.replace(/<[^>]*>/g, '');
                    navigator.clipboard.writeText(text).then(() => {
                        alert('내용이 복사되었습니다!');
                    }).catch(() => {
                        alert('복사에 실패했습니다.');
                    });
                });
            }
        }
        
        function formatContent(content) {
            if (!content) return '';
            return content.replace(/\n/g, '<br>');
        }
        
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // 야간 모드 토글
        function toggleNightMode() {
            const body = document.body;
            const toggle = document.getElementById('nightToggle');
            body.classList.toggle('night-mode');
            
            if (body.classList.contains('night-mode')) {
                toggle.textContent = '☀️';
                localStorage.setItem('nightMode', 'true');
            } else {
                toggle.textContent = '🌙';
                localStorage.setItem('nightMode', 'false');
            }
        }
        
        // 야간 모드 초기화 (저장된 설정 또는 시간 기반)
        function initNightMode() {
            const saved = localStorage.getItem('nightMode');
            const hour = new Date().getHours();
            const isNightTime = hour >= 20 || hour < 6; // 저녁 8시 ~ 아침 6시
            
            if (saved === 'true' || (saved === null && isNightTime)) {
                document.body.classList.add('night-mode');
                document.getElementById('nightToggle').textContent = '☀️';
            }
        }
        
        searchInput.addEventListener('keypress', e => { if (e.key === 'Enter') handleSearch(); });
        initNightMode();
        renderHome();
    </script>
</body>
</html>
